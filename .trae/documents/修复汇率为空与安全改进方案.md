## 现状与问题定位
- 请求路径正确：`/v1/exchange/rates`，与官方文档一致（banking/exchange_rates.go:38-44）。
- 返回为空的高概率原因：响应字段名不匹配或请求的货币对格式不符合服务端预期。
  - 代码只解析 `rates`（banking/exchange_rates.go:29-32），而文档与变更记录显示可能存在 `current_rates` 或列表型 `data` 以及 `unavailable_currency_pairs` 字段。
  - 测试使用货币对格式 `USD/EUR` 等（test/exchange_rates_test.go:66、94、121、148、176、206、233），但官方其他端点示例使用 `USDTHB` 无斜杠格式；若服务端要求无斜杠，当前实现会得到“不可用货币对”，而我们并未解析该字段，导致仅看到空列表。

## 修复与增强计划
1. 兼容响应字段
- 扩展响应解析结构，支持：
  - `rates`、`current_rates`、`data` 三种列表字段（择一取非空）
  - `unavailable_currency_pairs` 字段，便于诊断请求格式问题
- 在 `ExchangeRatesClient.List` 中统一归并为一个 `Rates` 列表返回。

2. 兼容货币对格式
- 在构建 `currency_pairs` 参数时，对含 `/` 的格式进行双轨请求：
  - 原始值（如 `USD/EUR`）
  - 规范化值（去斜杠拼接，如 `USDEUR`）
- 将两者去重后并入同一次查询，最大化命中（示例：`currency_pairs=USD/EUR,USDEUR,...`）。

3. 可观测性与测试改造
- 在测试 `exchange_rates_test.go` 中增加：
  - 记录 `unavailable_currency_pairs` 内容（若存在）
  - 对主要用例添加斜杠与无斜杠的双格式请求，验证至少一种返回非空。
- 增加对少量样本的数值解析（`buy_price`/`sell_price`）与价差计算，确保字段内容真实。

4. 客户端超时与健壮性
- 为 `uqpay.NewClient` 中传入的 `HTTPClient` 设置合理 `Timeout`（例如 15s），避免网络抖动导致长时间阻塞；当前为默认 `http.Client{}` 无超时（uqpay.go:23、43），而 `TokenProvider` 只有在传入 `nil` 时才设 10s 超时（auth/token.go:32-44）。
- 错误解码改进：当状态码≥400且无法按 `APIError` 解码时，保留响应体片段用于诊断（不更改现有异常类型）。

5. 安全检查
- 不输出或记录密钥；现有实现未泄漏密钥，保留。
- 继续使用 `x-idempotency-key`；虽用于 GET 较少见，但无安全问题。

## 实施步骤
- 修改 `banking/exchange_rates.go`：
  - 新增兼容响应结构并在 `List` 方法中做字段归并与格式双轨查询。
- 修改 `uqpay/uqpay.go`：
  - 为 `HTTPClient` 设置超时；同时将 `files` 客户端也设置超时一致。
- 修改 `test/exchange_rates_test.go`：
  - 记录 `unavailable_currency_pairs`；
  - 双格式查询与非空断言；
  - 价差计算的基础校验。

## 验证方式
- 本地以沙箱密钥运行：`go test -v ./test -run TestExchangeRates -count=1`
- 期望：至少部分主流货币对返回非空；若斜杠格式不可用，可在日志中明确看到不可用列表。

如确认方案，立即按上述文件点位进行修改并提交测试验证。